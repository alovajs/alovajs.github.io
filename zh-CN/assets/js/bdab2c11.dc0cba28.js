"use strict";(globalThis.webpackChunkalova_website=globalThis.webpackChunkalova_website||[]).push([[4839],{28453(e,r,n){n.d(r,{R:()=>s,x:()=>i});var a=n(96540);const t={},o=a.createContext(t);function s(e){const r=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function i(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),a.createElement(o.Provider,{value:r},e.children)}},58513(e,r,n){n.r(r),n.d(r,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>s,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"resource/storage-adapter/file","title":"\u6587\u4ef6\u5b58\u50a8\u9002\u914d\u5668","description":"\u901a\u8fc7\u6587\u4ef6\u5b58\u50a8\u6570\u636e\uff0c\u4f7f\u7528\u539f\u5b50\u5316\u6587\u4ef6\u64cd\u4f5c\uff0c\u652f\u6301\u670d\u52a1\u5668\u96c6\u7fa4\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/resource/02-storage-adapter/02-file.md","sourceDirName":"resource/02-storage-adapter","slug":"/resource/storage-adapter/file","permalink":"/zh-CN/resource/storage-adapter/file","draft":false,"unlisted":false,"editUrl":"https://github.com/alovajs/alovajs.github.io/blob/main/docs/resource/02-storage-adapter/02-file.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"\u6587\u4ef6\u5b58\u50a8\u9002\u914d\u5668"},"sidebar":"resource","previous":{"title":"\u8fdb\u7a0b\u5171\u4eab\u9002\u914d\u5668","permalink":"/zh-CN/resource/storage-adapter/psc"},"next":{"title":"Redis\u5b58\u50a8\u9002\u914d\u5668","permalink":"/zh-CN/resource/storage-adapter/redis"}}');var t=n(74848),o=n(28453);const s={title:"\u6587\u4ef6\u5b58\u50a8\u9002\u914d\u5668"},i=void 0,l={},c=[{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:2},{value:"\u4f7f\u7528",id:"\u4f7f\u7528",level:2},{value:"\u4f5c\u4e3a\u539f\u5b50\u9501",id:"\u4f5c\u4e3a\u539f\u5b50\u9501",level:2}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.p,{children:"\u901a\u8fc7\u6587\u4ef6\u5b58\u50a8\u6570\u636e\uff0c\u4f7f\u7528\u539f\u5b50\u5316\u6587\u4ef6\u64cd\u4f5c\uff0c\u652f\u6301\u670d\u52a1\u5668\u96c6\u7fa4\u3002"}),"\n",(0,t.jsx)(r.admonition,{title:"Tips",type:"info",children:(0,t.jsx)(r.p,{children:"\u4ec5 alova 3.0+ \u652f\u6301"})}),"\n",(0,t.jsx)(r.h2,{id:"\u5b89\u88c5",children:"\u5b89\u88c5"}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# npm\nnpm install alova @alova/storage-file --save\n# yarn\nyarn add alova @alova/storage-file\n# npm\npnpm install alova @alova/storage-file\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u4f7f\u7528",children:"\u4f7f\u7528"}),"\n",(0,t.jsxs)(r.p,{children:["\u521b\u5efa",(0,t.jsx)(r.code,{children:"FileStorageAdapter"}),"\u5e76\u6307\u5b9a\u6587\u4ef6\u5b58\u50a8\u76ee\u5f55\uff0c\u5982\u679c\u76ee\u5f55\u4e0d\u5b58\u5728\u5c06\u4f1a\u81ea\u52a8\u521b\u5efa\u3002"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:"const { createAlova } = require('alova');\nconst FileStorageAdapter = require('@alova/storage-file');\n\nconst dir = '~/alova/storage';\nconst fileAdapter = new FileStorageAdapter({ directory: dir });\nconst alovaInstance = createAlova({\n  // ...\n  l2Cache: fileAdapter\n});\n"})}),"\n",(0,t.jsx)(r.h2,{id:"\u4f5c\u4e3a\u539f\u5b50\u9501",children:"\u4f5c\u4e3a\u539f\u5b50\u9501"}),"\n",(0,t.jsxs)(r.p,{children:[(0,t.jsx)(r.code,{children:"[v3.4.0+]"}),"\u6b64\u5b58\u50a8\u9002\u914d\u5668\u5185\u7f6e\u4e86\u57fa\u4e8e",(0,t.jsx)(r.code,{children:"proper-lockfile"}),"\u7684\u8fdb\u7a0b\u9501\uff0c\u53ef\u4ee5\u914d\u5408",(0,t.jsx)(r.code,{children:"atomize"}),"\u7b56\u7565\u4f7f\u7528\uff0c\u786e\u4fdd\u591a\u8fdb\u7a0b\u73af\u5883\u4e0b\u8bf7\u6c42\u7684\u539f\u5b50\u6027\uff0c\u8be6\u60c5\u8bf7\u53c2\u8003",(0,t.jsx)(r.a,{href:"/tutorial/server/strategy/atomize",children:"\u539f\u5b50\u5316\u8bf7\u6c42"}),"\u3002"]}),"\n",(0,t.jsxs)(r.p,{children:["\u4f60\u53ef\u4ee5\u8bbe\u7f6e",(0,t.jsx)(r.code,{children:"proper-lockfile"}),"\u7684\u914d\u7f6e\u9879\uff0c\u5b83\u5c06\u4f1a\u4f20\u7ed9",(0,t.jsx)(r.code,{children:"lock"}),"\u548c",(0,t.jsx)(r.code,{children:"unlock"}),"\uff0c\u5177\u4f53\u53c2\u6570\u8bf7\u53c2\u8003",(0,t.jsx)(r.a,{href:"https://www.npmjs.com/package/proper-lockfile#usage",children:"proper-lockfile#usage"}),"\u3002"]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-javascript",children:"const fileAdapter = new FileStorageAdapter({\n  // ...\n  lockerOptions: {\n    retries: 5 // \u91cd\u8bd5\u6b21\u6570\n    // ...\n  }\n});\n"})})]})}function p(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}}}]);