"use strict";(self.webpackChunkalova_website=self.webpackChunkalova_website||[]).push([[3903],{62701:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>l,metadata:()=>d,toc:()=>h});var a=t(85893),i=t(11151),s=t(74866),r=t(85162);const l={title:"Pagination request strategy"},o=void 0,d={id:"tutorial/client/strategy/use-pagination",title:"Pagination request strategy",description:"use hook",source:"@site/docs/tutorial/03-client/01-strategy/04-use-pagination.md",sourceDirName:"tutorial/03-client/01-strategy",slug:"/tutorial/client/strategy/use-pagination",permalink:"/tutorial/client/strategy/use-pagination",draft:!1,unlisted:!1,editUrl:"https://github.com/alovajs/alovajs.github.io/blob/main/docs/tutorial/03-client/01-strategy/04-use-pagination.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{title:"Pagination request strategy"},sidebar:"tutorial",previous:{title:"Fetch Data",permalink:"/tutorial/client/strategy/use-fetcher"},next:{title:"Form submiting strategy",permalink:"/tutorial/client/strategy/use-form"}},c={},h=[{value:"Features",id:"features",level:2},{value:"Usage",id:"usage",level:2},{value:"Render list data",id:"render-list-data",level:3},{value:"Specify pagination data",id:"specify-pagination-data",level:3},{value:"Enable append mode",id:"enable-append-mode",level:3},{value:"Preload adjacent page data",id:"preload-adjacent-page-data",level:3},{value:"Listening for filtering conditions",id:"listening-for-filtering-conditions",level:3},{value:"Turn off initialization request",id:"turn-off-initialization-request",level:3},{value:"List operation function",id:"list-operation-function",level:2},{value:"Insert list item",id:"insert-list-item",level:3},{value:"Remove list items",id:"remove-list-items",level:3},{value:"Update data items",id:"update-data-items",level:3},{value:"Refresh the data of the specified page",id:"refresh-the-data-of-the-specified-page",level:3},{value:"Manually update list data",id:"manually-update-list-data",level:3},{value:"Reset the list",id:"reset-the-list",level:3},{value:"Compatible with <code>updateState</code>",id:"compatible-with-updatestate",level:2},{value:"API",id:"api",level:2},{value:"Hook configuration",id:"hook-configuration",level:3},{value:"PaginationAction",id:"paginationaction",level:4},{value:"Responsive data",id:"responsive-data",level:3},{value:"Operation function",id:"operation-function",level:3},{value:"Events",id:"events",level:3}];function u(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.admonition,{title:"Strategy type",type:"info",children:(0,a.jsx)(n.p,{children:"use hook"})}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"Before using extended hooks, make sure you are familiar with the basic use of alova."}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["A hook designed for paging scenarios, it can help you automatically manage paging data, preload data, reduce unnecessary data refreshes, ",(0,a.jsx)(n.strong,{children:"improve fluency by 300%, and reduce coding difficulty by 50%"}),". You can use it in two paging scenarios: pull-down loading and page number flipping. This hook provides rich features to help your application create better performance and more convenient paging functions."]}),"\n",(0,a.jsx)(n.h2,{id:"features",children:"Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Rich and comprehensive paging status;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Rich and comprehensive paging events;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Automatically obtain the specified paging data by changing page and pageSize;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Data cache, no need to repeatedly request list data with the same parameters;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Preload the previous and next pages, no need to wait for page turning;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Automatically re-acquire the number of pages by monitoring the search conditions;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Support adding, editing, and deleting list data;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Support refreshing the data of the specified page without resetting;"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Request-level search anti-shake, no need for self-maintenance;"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,a.jsx)(n.h3,{id:"render-list-data",children:"Render list data"}),"\n",(0,a.jsxs)(s.Z,{groupId:"framework",children:[(0,a.jsx)(r.Z,{value:"1",label:"vue",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<template>\n  <div\n    v-for="(item, i) in data"\n    :key="item.id">\n    <span>{{ item.name }}</span>\n    <button\n      :loading="removing.includes(i)"\n      @click="remove(item)">\n      Delete\n    </button>\n  </div>\n  <button @click="handlePrevPage">Previous page</button>\n  <button @click="handleNextPage">Next page</button>\n  <button @click="handleSetPageSize">Set the number of pages per page</button>\n  <span>Total {{ pageCount }} pages</span>\n  <span>Total {{ total }} data</span>\n</template>\n\n<script setup>\n  import { queryStudents } from \'./api.js\';\n  import { usePagination } from \'alova/client\';\n\n  const {\n    // Loading status\n    loading,\n\n    // List data\n    data,\n\n    // Is it the last page\n    // This parameter can be used to determine whether loading is required when pulling down to load\n    isLastPage,\n\n    // Current page number. Changing this page number will automatically trigger a request\n    page,\n\n    // Number of data items per page\n    pageSize,\n\n    // Number of pages for paging\n    pageCount,\n\n    // Total amount of data\n    total,\n\n    // [3.3.0+]\n    // action status. This status will be changed only when the corresponding action is triggered. The specific values \u200b\u200bare as follows:\n    // empty string: default status\n    // loading: list data request\n    // removing: list data deletion\n    // inserting: list data insertion\n    // replacing: list data replacement\n    status,\n\n    // [3.3.0+]\n    // Removing list items\n    remove,\n\n    // [3.3.0+]\n    // The row index array being removed, used to control the delete button status of the corresponding column\n    removing,\n\n    // [3.3.0+]\n    // Replace list items\n    replace,\n\n    // [3.3.0+]\n    // Row being replaced index, used to control the replacement button state of the corresponding column\n    replacing\n  } = usePagination(\n    // Method instance acquisition function, which will receive page and pageSize and return a Method instance\n    (page, pageSize) => queryStudents(page, pageSize),\n    {\n      // Initial data before request (data format returned by the interface)\n      initialData: {\n        total: 0,\n        data: []\n      },\n      initialPage: 1, // Initial page number, default is 1\n      initialPageSize: 10, // Initial number of data per page, default is 10\n\n      // [3.3.0+]\n      actions: {\n        // When the remove function is called, this action will be triggered and receive the parameters of the remove function\n        remove: async row => {\n          // fetch remove interface...\n        }\n      }\n    }\n  );\n\n  // Turn to the previous page, and the request will be automatically sent after the page value changes\n  const handlePrevPage = () => {\n    page.value--;\n  };\n\n  // Turn to the next page, the request will be automatically sent after the page value is changed\n  const handleNextPage = () => {\n    page.value++;\n  };\n\n  // Change the number of pages per page, the request will be automatically sent after the pageSize value is changed\n  const handleSetPageSize = () => {\n    pageSize.value = 20;\n  };\n<\/script>\n'})})}),(0,a.jsx)(r.Z,{value:"2",label:"react",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { queryStudents } from './api.js';\nimport { usePagination } from 'alova/client';\n\nconst App = () => {\n  const {\n    // Loading status\n    loading,\n\n    // List data\n    data,\n\n    // Is it the last page\n    // This parameter can be used to determine whether it needs to be loaded when pulling down to load\n    isLastPage,\n\n    // Current page number, changing this page number will automatically trigger a request\n    page,\n\n    // Number of data per page\n    pageSize,\n\n    // Number of pages for paging\n    pageCount,\n\n    // Total amount of data\n    total,\n\n    // [3.3.0+]\n    // action status, this status will be changed only when the corresponding action is triggered, the specific values \u200b\u200bare as follows:\n    // empty string: default status\n    // loading: list data request\n    // removing: list data deletion\n    // inserting: list data insertion\n    // replacing: list data replacement\n    status,\n\n    // [3.3.0+]\n    // Remove list items\n    remove,\n\n    // [3.3.0+]\n    // The row index array being removed, used to control the delete button state of the corresponding column\n    removing,\n\n    // [3.3.0+]\n    // Replace list items\n    replace,\n\n    // [3.3.0+]\n    // The row index being replaced, used to control the replace button state of the corresponding column\n    replacing,\n\n    // Update status\n    update\n  } = usePagination(\n    // Method instance acquisition function, which will receive page and pageSize and return a Method instance\n    (page, pageSize) => queryStudents(page, pageSize),\n    {\n      // Initial data before request (data format returned by the interface)\n      initialData: {\n        total: 0,\n        data: []\n      },\n      initialPage: 1, // Initial page number, default is 1\n      initialPageSize: 10, // Initial number of data per page, default is 10\n\n      // [3.3.0+]\n      actions: {\n        // When the remove function is called, this action will be triggered and receive the parameters of the remove function\n        remove: async row => {\n          // fetch remove interface...\n        }\n      }\n    }\n  );\n\n  // Turn to the previous page, the request will be automatically sent after the page value changes\n  const handlePrevPage = () => {\n    update({\n      page: page - 1\n    });\n  };\n\n  // Turn to the next page, the request will be automatically sent after the page value changes\n  const handleNextPage = () => {\n    update({\n      page: page + 1\n    });\n  };\n\n  // Change the number of pages per page, and the request will be automatically sent after the pageSize value changes\n  const handleSetPageSize = () => {\n    update({\n      pageSize: 20\n    });\n  };\n\n  return (\n    <div>\n      {data.map((item, i) => (\n        <div key={item.id}>\n          <span>{item.name}</span>\n          <button\n            loading={removing.includes(i)}\n            onClick={() => remove(item)}>\n            Delete\n          </button>\n        </div>\n      ))}\n      <button onClick={handlePrevPage}>Previous page</button>\n      <button onClick={handleNextPage}>Next page</button>\n      <button onClick={handleSetPageSize}>Set the number of pages per page</button>\n      <span>Total {pageCount} pages</span>\n      <span>Total {total} data</span>\n    </div>\n  );\n};\n"})})}),(0,a.jsx)(r.Z,{value:"3",label:"svelte",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<script>\n  import { queryStudents } from \'./api.js\';\n  import { usePagination } from \'alova/client\';\n\n  const {\n    // Loading status\n    loading,\n\n    // List data\n    data,\n\n    // Is it the last page\n    // This parameter can be used to determine whether loading is required when pulling down to load\n    isLastPage,\n\n    // Current page number. Changing this page number will automatically trigger a request\n    page,\n\n    // Number of data items per page\n    pageSize,\n\n    // Number of pages for paging\n    pageCount,\n\n    // Total amount of data\n    total,\n\n    // [3.3.0+]\n    // action status. This status will be changed only when the corresponding action is triggered. The specific values \u200b\u200bare as follows:\n    // empty string: default status\n    // loading: list data request\n    // removing: list data removal\n    // inserting: list data insertion\n    // replacing: list data replacement\n    status,\n\n    // [3.3.0+]\n    // Remove list items\n    remove,\n\n    // [3.3.0+]\n    // The row index array being removed is used to control the delete button status of the corresponding column\n    removing,\n\n    // [3.3.0+]\n    // Replace list items\n    replace,\n    // [3.3.0+]\n    // The row index being replaced is used to control the replacement button status of the corresponding column\n    replacing\n  } = usePagination(\n    // Method instance acquisition function, which will receive page and pageSize and return a Method instance\n    (page, pageSize) => queryStudents(page, pageSize),\n    {\n      // Initial data before request (data format returned by the interface)\n      initialData: {\n        total: 0,\n        data: []\n      },\n      initialPage: 1, // Initial page number, default is 1\n      initialPageSize: 10, // Initial number of data per page, default is 10\n\n      // [3.3.0+]\n      actions: {\n        // When the remove function is called, this action will be triggered and receive the parameters of the remove function\n        remove: async row => {\n          // fetch remove interface...\n        }\n      }\n    }\n  );\n\n  // Go to the previous page, the request will be automatically sent after the page value is changed\n  const handlePrevPage = () => {\n    $page--;\n  };\n\n  // Go to the next page, the request will be automatically sent after the page value is changed\n  const handleNextPage = () => {\n    $page++;\n  };\n\n  // Change the number of pages per page, the request will be automatically sent after the pageSize value is changed\n  const handleSetPageSize = () => {\n    $pageSize = 20;\n  };\n<\/script>\n\n{#each $data as item, i}\n<div>\n  <span>{item.name}</span>\n  <button\n    loading="{removing.includes(i)}"\n    on:click="() => remove(item)">\n    Delete\n  </button>\n</div>\n{/each}\n<button on:click="{handlePrevPage}">Previous page</button>\n<button on:click="{handleNextPage}">Next page</button>\n<button on:click="{handleSetPageSize}">Set the number of pages</button>\n<span>Total {pageCount} pages</span>\n<span>Total {total} data</span>\n'})})}),(0,a.jsx)(r.Z,{value:"4",label:"solid",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { queryStudents } from './api.js';\nimport { usePagination } from 'alova/client';\n\nconst App = () => {\n  const {\n    // Loading status\n    loading,\n\n    // List data\n    data,\n\n    // Is it the last page\n    // This parameter can be used to determine whether it needs to be loaded when pulling down to load\n    isLastPage,\n\n    // Current page number, changing this page number will automatically trigger a request\n    page,\n\n    // Number of data per page\n    pageSize,\n\n    // Number of pages for paging\n    pageCount,\n\n    // Total data\n    total,\n\n    // [3.3.0+]\n    // action status, this status will be changed only when the corresponding action is triggered, the specific values \u200b\u200bare as follows:\n    // empty string: default status\n    // loading: list data request\n    // removing: list data removal\n    // inserting: list data insertion\n    // replacing: list data replacement\n    status,\n\n    // [3.3.0+]\n    // Remove list items\n    remove,\n\n    // [3.3.0+]\n    // The row index array being removed, used to control the delete button state of the corresponding column\n    removing,\n\n    // [3.3.0+]\n    // Replace list items\n    replace,\n\n    // [3.3.0+]\n    // The row index being replaced, used to control the replace button state of the corresponding column\n    replacing,\n\n    // Update status\n    update\n  } = usePagination(\n    // Method instance acquisition function, which will receive page and pageSize and return a Method instance\n    (page, pageSize) => queryStudents(page, pageSize),\n    {\n      // Initial data before request (data format returned by the interface)\n      initialData: {\n        total: 0,\n        data: []\n      },\n      initialPage: 1, // Initial page number, default is 1\n      initialPageSize: 10, // Initial number of data per page, default is 10\n\n      // [3.3.0+]\n      actions: {\n        // When the remove function is called, this action will be triggered and receive the parameters of the remove function\n        remove: async row => {\n          // fetch remove interface...\n        }\n      }\n    }\n  );\n\n  // Turn to the previous page, the request will be automatically sent after the page value changes\n  const handlePrevPage = () => {\n    update({\n      page: page() - 1\n    });\n  };\n\n  // Turn to the next page, the request will be automatically sent after the page value is changed\n  const handleNextPage = () => {\n    update({\n      page: page() + 1\n    });\n  };\n\n  // Change the number of pages per page, and the request will be automatically sent after the pageSize value is changed\n  const handleSetPageSize = () => {\n    update({\n      pageSize: 20\n    });\n  };\n\n  return (\n    <div>\n      {data().map((item, i) => (\n        <div key={item.id}>\n          <span>{item.name}</span>\n          <button\n            loading={removing.includes(i)}\n            onClick={() => remove(item)}>\n            Delete\n          </button>\n        </div>\n      ))}\n      <button onClick={handlePrevPage}>Previous page</button>\n      <button onClick={handleNextPage}>Next page</button>\n      <button onClick={handleSetPageSize}>Set the number of pages per page</button>\n      <span>There are {pageCount()} pages in total</span>\n      <span>There are {total()} pieces of data in total</span>\n    </div>\n  );\n};\n"})})})]}),"\n",(0,a.jsx)(n.h3,{id:"specify-pagination-data",children:"Specify pagination data"}),"\n",(0,a.jsxs)(n.p,{children:["Each pagination data interface returns a different data structure, so we need to tell ",(0,a.jsx)(n.code,{children:"usePagination"})," the list data and the total number of items to help us manage the pagination data."]}),"\n",(0,a.jsx)(n.p,{children:"Suppose your pagination interface returns the following data format:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"interface PaginationData {\n  totalNumber: number;\n  list: any[];\n}\n"})}),"\n",(0,a.jsx)(n.p,{children:"At this time, you need to return the list data and the total number of items in the form of a function."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination((page, pageSize) => queryStudents(page, pageSize), {\n  // ...\n  // highlight-start\n  total: response => response.totalNumber,\n  data: response => response.list\n  // highlight-end\n});\n"})}),"\n",(0,a.jsx)(n.p,{children:"If you do not specify the total and data callback functions, they will get the data by default in the following way."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const total = response => response.total;\nconst data = response => response.data;\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Note",type:"warning",children:(0,a.jsx)(n.p,{children:"The data callback function must return a list data, which represents the data set used in paging, and total is mainly used to calculate the current page number. If no number is returned in the total callback function, it will be determined whether the current page is the last page by whether the number of lists requested is less than the pageSize value. This is generally used for pull-down loading."})}),"\n",(0,a.jsx)(n.h3,{id:"enable-append-mode",children:"Enable append mode"}),"\n",(0,a.jsx)(n.p,{children:"By default, the original list data will be replaced when turning pages, while the append mode is to append the next page of data to the bottom of the current list when turning pages. The common usage scenario is to pull down to load more."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination((page, pageSize) => queryStudents(page, pageSize), {\n  // ...\n  // highlight-start\n  append: true\n  // highlight-end\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"preload-adjacent-page-data",children:"Preload adjacent page data"}),"\n",(0,a.jsx)(n.p,{children:"In order to provide a better experience for paging, the previous and next pages of the current page will be automatically preloaded when the conditions are met, so that the data can be displayed directly when the user turns the page without waiting. This is the default behavior. If you do not want to preload the data of adjacent pages, you can turn it off in the following way."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination((page, pageSize) => queryStudents(page, pageSize), {\n  // ...\n  // highlight-start\n  preloadPreviousPage: false, // Disable preloading of the previous page data\n  preloadNextPage: false // Disable preloading of the next page data\n  // highlight-end\n});\n"})}),"\n",(0,a.jsxs)(n.admonition,{title:"Preloading trigger conditions",type:"warning",children:[(0,a.jsx)(n.p,{children:"When preloading is enabled, the next page will not be loaded blindly. The following two conditions must be met:"}),(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Preloading is based on caching. The Method instance used for paging loading must enable caching. By default, get requests will have a 5-minute memory cache. If it is a non-get request or the cache is globally disabled, you also need to set ",(0,a.jsx)(n.code,{children:"cacheFor"})," in this Method instance to enable caching."]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Determine whether there is data on the next page based on the ",(0,a.jsx)(n.code,{children:"total"})," and ",(0,a.jsx)(n.code,{children:"pageSize"})," parameters."]}),"\n"]}),"\n"]})]}),"\n",(0,a.jsxs)(n.p,{children:["In addition to the ",(0,a.jsx)(n.code,{children:"onSuccess, onError, and onComplete"})," request events, when preloading is triggered, you can also use ",(0,a.jsx)(n.code,{children:"fetching"})," to get the preloading status, and you can also use ",(0,a.jsx)(n.code,{children:"onFetchSuccess, onFetchError, and onFetchComplete"})," to listen to the preloading request events."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"const {\n  // Preloading status\n  fetching,\n\n  // Preloading success event binding function\n  onFetchSuccess,\n\n  // Preloading error event binding function\n  onFetchError,\n\n  // Preloading completion event binding function\n  onFetchComplete\n} = usePagination((page, pageSize) => queryStudents(page, pageSize), {\n  // ...\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"listening-for-filtering-conditions",children:"Listening for filtering conditions"}),"\n",(0,a.jsxs)(n.p,{children:["Many times, the list needs to be filtered by conditions. At this time, the ",(0,a.jsx)(n.code,{children:"usePagination"})," status monitoring can be used to trigger a re-request, which is the same as the ",(0,a.jsx)(n.code,{children:"useWatcher"})," provided by alova."]}),"\n",(0,a.jsx)(n.p,{children:"For example, filtering by student name or student grade."}),"\n",(0,a.jsxs)(s.Z,{groupId:"framework",children:[(0,a.jsx)(r.Z,{value:"1",label:"vue",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:"<template>\n  \x3c!-- highlight-start --\x3e\n  <input v-model=\"studentName\" />\n  <select v-model=\"clsName\">\n    <option value=\"1\">Class 1</option>\n    <option value=\"2\">Class 2</option>\n    <option value=\"3\">Class 3</option>\n  </select>\n  \x3c!-- highlight-end --\x3e\n  \x3c!-- ... --\x3e\n</template>\n\n<script setup>\n  import { ref } from 'vue';\n  import { queryStudents } from './api.js';\n  import { usePagination } from 'alova/client';\n\n  //Search condition status\n  const studentName = ref('');\n  const clsName = ref('');\n  const {\n    // ...\n  } = usePagination(\n    (page, pageSize) => queryStudents(page, pageSize, studentName.value, clsName.value),\n    {\n      // ...\n      // highlight-start\n      watchingStates: [studentName, clsName]\n      // highlight-end\n    }\n  );\n<\/script>\n"})})}),(0,a.jsx)(r.Z,{value:"2",label:"react",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { queryStudents } from './api.js';\nimport { usePagination } from 'alova/client';\nimport { useState } from 'react';\n\nconst App = () => {\n//Search condition status\nconst [studentName, setStudentName] = useState('');\nconst [clsName, setClsName] = useState('');\nconst {\n// ...\n} = usePagination(\n(page, pageSize) => queryStudents(page, pageSize, studentName, clsName),\n{\n// ...\n// highlight-start\nwatchingStates: [studentName, clsName]\n// highlight-end\n}\n);\n\nreturn (\n// highlight-start\n<input value={studentName} onChange={({ target }) => setStudentName(target.value)} />\n<select value={clsName} onChange={({ target }) => setClsName(target.value)}>\n<option value=\"1\">Class 1</option>\n<option value=\"2\">Class 2</option>\n<option value=\"3\">Class 3</option>\n</select>\n// highlight-end\n// ...\n);\n};\n"})})}),(0,a.jsx)(r.Z,{value:"3",label:"svelte",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:"<script>\n  import { queryStudents } from './api.js';\n  import { usePagination } from 'alova/client';\n  import { writable } from 'svelte/store';\n\n  //Search condition status\n  const studentName = writable('');\n  const clsName = writable('');\n  const {\n    // ...\n  } = usePagination((page, pageSize) => queryStudents(page, pageSize, $studentName, $clsName), {\n    // ...\n    // highlight-start\n    watchingStates: [studentName, clsName]\n    // highlight-end\n  });\n<\/script>\n\n\x3c!-- highlight-start --\x3e\n<input bind:value=\"{studentName}\" />\n<select bind:value=\"{clsName}\">\n  <option value=\"1\">Class 1</option>\n  <option value=\"2\">Class 2</option>\n  <option value=\"3\">Class 3</option>\n</select>\n\x3c!-- highlight-end --\x3e\n\x3c!-- ... --\x3e\n"})})}),(0,a.jsx)(r.Z,{value:"4",label:"solid",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-jsx",children:"import { queryStudents } from './api.js';\nimport { usePagination } from 'alova/client';\nimport { createSignal } from 'solid-js';\n\nconst App = () => {\n//Search condition status\nconst [studentName, setStudentName] = createSignal('');\nconst [clsName, setClsName] = createSignal('');\nconst {\n// ...\n} = usePagination(\n(page, pageSize) => queryStudents(page, pageSize, studentName(), clsName()),\n{\n// ...// highlight-start\nwatchingStates: [studentName, clsName]\n// highlight-end\n}\n);\n\nreturn (\n// highlight-start\n<input value={studentName()} onChange={({ target }) => setStudentName(target.value)} />\n<select value={clsName()} onChange={({ target }) => setClsName(target.value)}>\n<option value=\"1\">Class 1</option>\n<option value=\"2\">Class 2</option>\n<option value=\"3\">Class 3</option>\n</select>\n// highlight-end\n// ...\n);\n};\n"})})})]}),"\n",(0,a.jsxs)(n.p,{children:["Similar to ",(0,a.jsx)(n.code,{children:"useWatcher"}),", you can also implement request anti-shake by specifying ",(0,a.jsx)(n.code,{children:"debounce"}),". For details, please refer to ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:"useWatcher's debounce parameter setting"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination((page, pageSize) => queryStudents(page, pageSize, studentName, clsName), {\n  // ...\n  // highlight-start\n  debounce: 300 // Anti-shake parameter, in milliseconds, can also be set as an array to set the anti-shake time for watchingStates\n  // highlight-end\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["It should be noted that ",(0,a.jsx)(n.code,{children:"debounce"})," is implemented through request anti-shake in ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:(0,a.jsx)(n.strong,{children:"useWatcher"})}),". **There are two hidden monitoring states, page and pageSize, at the end of the monitoring state, which can also be set through debounce. **"]}),"\n",(0,a.jsxs)(n.p,{children:["For example, when ",(0,a.jsx)(n.code,{children:"watchingStates"})," sets ",(0,a.jsx)(n.code,{children:"[studentName, clsName]"}),", ",(0,a.jsx)(n.code,{children:"[studentName, clsName, page, pageSize]"})," will be monitored internally, so if you need to set anti-shake for page and pageSize, you can specify ",(0,a.jsx)(n.code,{children:"[0, 0, 500, 500]"}),"."]}),"\n",(0,a.jsx)(n.h3,{id:"turn-off-initialization-request",children:"Turn off initialization request"}),"\n",(0,a.jsxs)(n.p,{children:["By default, ",(0,a.jsx)(n.code,{children:"usePagination"})," will initiate a request at initialization, but you can also use ",(0,a.jsx)(n.code,{children:"immediate"})," to turn it off, and then initiate a request through the ",(0,a.jsx)(n.code,{children:"send"})," function, or change ",(0,a.jsx)(n.code,{children:"page"})," or ",(0,a.jsx)(n.code,{children:"pageSize"}),", as well as ",(0,a.jsx)(n.code,{children:"watchingStates"})," and other monitoring states."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination((page, pageSize) => queryStudents(page, pageSize, studentName, clsName), {\n  // ...\n  // highlight-start\n  immediate: false\n  // highlight-end\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"list-operation-function",children:"List operation function"}),"\n",(0,a.jsx)(n.p,{children:"usePagination provides a full-featured list operation function, which can achieve the same effect as re-requesting the list without re-requesting the list, greatly improving the interactive experience of the page, and can also trigger the corresponding action to request data and display the operation status."}),"\n",(0,a.jsx)(n.h3,{id:"insert-list-item",children:"Insert list item"}),"\n",(0,a.jsx)(n.p,{children:"You can use it to insert a list item to any position in the list, and it will remove the last item after insertion to ensure the same effect as re-requesting the current page data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"/**\n* Insert a piece of data\n* If index is not passed, it will be inserted at the front by default\n* If a list item is passed, it will be inserted after this list item. If the list item is not in the list data, an error will be thrown\n* @param item Insert item\n* @param indexOrItem Insert position (index)\n*/\ndeclare async function insert(item: LD[number], indexOrItem?: number | LD[number]): void;\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The following is an example of returning to the first page and inserting a list item in ",(0,a.jsx)(n.strong,{children:"non-append mode"})," (page number flipping scenario):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"page.value = 1;\nnextTick(() => {\n  insert(newItem, 0);\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["The following is an example of scrolling to the top after inserting a list item in ",(0,a.jsx)(n.strong,{children:"append mode"})," (pull-down loading scenario):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"await insert(newItem, 0);\nnextTick(() => {\n  window.scrollTo(0, {});\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can also specify the second parameter of ",(0,a.jsx)(n.code,{children:"insert"})," as a list item. When the same reference of this list item is found, the inserted item will be inserted after this list item."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"await insert(newItem, afterItem);\n"})}),"\n",(0,a.jsx)(n.admonition,{title:"Note",type:"warning",children:(0,a.jsx)(n.p,{children:"In order to make the data correct, the insert function call will clear all caches."})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"insert action"})}),"\n",(0,a.jsx)(n.p,{children:"You can also specify the insert callback in actions, which is used to send the insert request, which will be triggered before inserting data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination({\n  // ...\n  actions: {\n    // highlight-start\n    // row parameter passed from insert function\n    insert: async row => {\n      await insertListItem(row);\n    }\n    // highlight-end\n  }\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"remove-list-items",children:"Remove list items"}),"\n",(0,a.jsxs)(n.p,{children:["If the next page has cache, it will use the cache of the next page to add to the end of the list item after removing an item to ensure the same effect as re-requesting the current page data. It behaves the same in ",(0,a.jsx)(n.strong,{children:"append mode"})," and ",(0,a.jsx)(n.strong,{children:"non-append mode"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"/**\n* Remove a piece of data\n* If a list item is passed in, it will be removed. If the list item is not in the list data, an error will be thrown\n* @param position The index or list item to be removed\n*/\ndeclare async function remove(...positions: Array<number | LD[number]>): void;\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can also specify the parameter of ",(0,a.jsx)(n.code,{children:"remove"})," as a list item. When the same reference of this list item is found, this list item will be removed."]}),"\n",(0,a.jsx)(n.p,{children:"But in the following two cases, it will re-initiate a request to refresh the data of the corresponding page:"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The next page is not cached"}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"The data of the cache list items exceeding the next page is called synchronously and continuously, and the cached data is not enough to supplement the current page list."}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{title:"Note",type:"warning",children:(0,a.jsx)(n.p,{children:"In order to make the data correct, the remove function call will clear all caches."})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"remove action"})}),"\n",(0,a.jsx)(n.p,{children:"You can also specify the remove callback in actions, which is used to send a removal request, which will be triggered before removing the data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination({\n  // ...\n  actions: {\n    // highlight-start\n    // The row parameter is passed from the remove function. If the remove function passes multiple removal items, this callback will be called multiple times\n    remove: async row => {\n      await insertListItem(row);\n    }\n    // highlight-end\n  }\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"update-data-items",children:"Update data items"}),"\n",(0,a.jsx)(n.p,{children:"When you want to update list items, use this function."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"/**\n* Replace a piece of data\n* When position is passed a number, it means replacing the index. A negative number means counting from the end. When position is passed a list item, it will replace this list item. If the list item is not in the list data, an error will be thrown\n* @param item replacement item\n* @param position replacement position (index) or list item\n*/\ndeclare async function replace(\nitem: LD extends any[] ? LD[number] : any,\nposition: number | LD[number]\n): void;\n"})}),"\n",(0,a.jsxs)(n.p,{children:["You can also specify the second parameter of ",(0,a.jsx)(n.code,{children:"replace"})," as a list item. When the same reference of this list item is found, this list item will be replaced."]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"replace action"})}),"\n",(0,a.jsx)(n.p,{children:"You can also specify the replace callback in actions, which is used to send a replacement request. It will be triggered before replacing the data."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"usePagination({\n  // ...\n  actions: {\n    // highlight-start\n    // row parameter passed from replace function\n    replace: async row => {\n      await replaceListItem(row);\n    }\n    // highlight-end\n  }\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"refresh-the-data-of-the-specified-page",children:"Refresh the data of the specified page"}),"\n",(0,a.jsx)(n.p,{children:"When you do not want to update the list items locally after data operation, but re-request the data from the server, you can use refresh to refresh the data of any page without resetting the list data and letting the user start browsing from the first page again."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"/**\n * Refresh the specified page number data, this function will ignore the cache and force the request to be sent\n * If the page number is not passed in, the current page will be refreshed\n * If a list item is passed in, the page where the list item is located will be refreshed\n * @param pageOrItemPage refreshed page number or list item\n * @returns [v3.1.0+] promise containing response data\n */\ndeclare function refresh(pageOrItemPage?: number | LD[number]): Promise<AG['Responded']>;\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In append mode, you can specify the parameter of ",(0,a.jsx)(n.code,{children:"refresh"})," as a list item. When the same reference of this list item is found, the data of the page number of this list item will be refreshed."]}),"\n",(0,a.jsx)(n.h3,{id:"manually-update-list-data",children:"Manually update list data"}),"\n",(0,a.jsxs)(n.p,{children:["Use the ",(0,a.jsx)(n.code,{children:"update"})," function to update responsive data, which is similar to ",(0,a.jsx)(n.a,{href:"/tutorial/client/strategy/use-request",children:"useRequest's update"}),". The only difference is that when calling ",(0,a.jsx)(n.code,{children:"update"})," to update ",(0,a.jsx)(n.code,{children:"data"}),", the list data is updated instead of the response data. This is useful when manually clearing the list data without re-initiating a request."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"// Situation list data\nupdate({\n  data: []\n});\n"})}),"\n",(0,a.jsx)(n.h3,{id:"reset-the-list",children:"Reset the list"}),"\n",(0,a.jsx)(n.p,{children:"It will clear all caches and reload the first page."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-typescript",children:"/**\n * Reload the list from the first page and clear the cache\n * @returns [v3.1.0+]promise instance, indicating whether the reset is successful\n */\ndeclare function reload(): Promise<void>;\n"})}),"\n",(0,a.jsxs)(n.h2,{id:"compatible-with-updatestate",children:["Compatible with ",(0,a.jsx)(n.code,{children:"updateState"})]}),"\n",(0,a.jsxs)(n.p,{children:["You can also use ",(0,a.jsx)(n.code,{children:"updateState"})," to update the responsive data exported by ",(0,a.jsx)(n.code,{children:"usePagination"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-javascript",children:"updateState(listMethod, {\n  // Update the exported list data, that is, data.\n  data: oldList => [...oldList, ...newList],\n  // Update the exported total data\n  total: oldTotal => oldTotal + newList.length,\n  // Update exported page data\n  page: oldPage => oldPage + 1,\n  // Update exported pageSize data\n  pageSize: oldPageSize => oldPageSize + 10\n});\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.a,{href:"/tutorial/client/in-depth/update-across-components",children:"Click here to view"}),"Detailed usage of ",(0,a.jsx)(n.code,{children:"updateState"}),"."]}),"\n",(0,a.jsxs)(n.p,{children:["Since the ",(0,a.jsx)(n.code,{children:"data"})," type of ",(0,a.jsx)(n.code,{children:"usePagination"})," is not directly inferred from method, the type needs to be manually specified in ",(0,a.jsx)(n.code,{children:"updateState"}),"."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-ts",children:"updateState<Item[]>(listMethod, {\n  data: oldList => [...oldList, ...newList]\n});\n"})}),"\n",(0,a.jsx)(n.h2,{id:"api",children:"API"}),"\n",(0,a.jsx)(n.h3,{id:"hook-configuration",children:"Hook configuration"}),"\n",(0,a.jsxs)(n.p,{children:["Inherits all configurations of ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:(0,a.jsx)(n.strong,{children:"useWatcher"})}),"."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Name"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Default"}),(0,a.jsx)(n.th,{children:"Version"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"initialPage"}),(0,a.jsx)(n.td,{children:"Initial page number"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"1"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"initialPageSize"}),(0,a.jsx)(n.td,{children:"Initial number of data per page"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"10"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"watchingStates"}),(0,a.jsx)(n.td,{children:"State monitoring trigger request, implemented using useWatcher"}),(0,a.jsx)(n.td,{children:"any[]"}),(0,a.jsx)(n.td,{children:"[page, pageSize]"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"debounce"}),(0,a.jsx)(n.td,{children:"Debounce parameter for state monitoring, implemented using useWatcher"}),(0,a.jsx)(n.td,{children:"number | number[]"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"append"}),(0,a.jsx)(n.td,{children:"Whether to enable append mode"}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"false"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"data"}),(0,a.jsx)(n.td,{children:"Array data for specifying paging"}),(0,a.jsx)(n.td,{children:"(response: any) => any[]"}),(0,a.jsx)(n.td,{children:"response => response.data"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"total"}),(0,a.jsx)(n.td,{children:"Specified total number of data"}),(0,a.jsx)(n.td,{children:"(response: any) => number"}),(0,a.jsx)(n.td,{children:"response => response.total"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"preloadPreviousPage"}),(0,a.jsx)(n.td,{children:"Whether to preload the previous page of data"}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"true"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"preloadNextPage"}),(0,a.jsx)(n.td,{children:"Whether to preload the next page of data"}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"true"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"actions"}),(0,a.jsx)(n.td,{children:"Operation function callback, used to request the corresponding interface"}),(0,a.jsx)(n.td,{children:(0,a.jsx)(n.a,{href:"#paginationaction",children:"PaginationAction"})}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"3.3.0"})]})]})]}),"\n",(0,a.jsx)(n.h4,{id:"paginationaction",children:"PaginationAction"}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Name"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Default value"}),(0,a.jsx)(n.th,{children:"Version"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"insert"}),(0,a.jsxs)(n.td,{children:["insert callback function, triggered when the operation function ",(0,a.jsx)(n.code,{children:"insert"})," is called"]}),(0,a.jsx)(n.td,{children:"(item: Row, position: number) => Promise<void>"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"3.3.0"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"remove"}),(0,a.jsxs)(n.td,{children:["remove callback function, triggered when the operation function ",(0,a.jsx)(n.code,{children:"remove"})," is called"]}),(0,a.jsx)(n.td,{children:"(item: number | Row) => Promise<void>"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"3.3.0"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"replace"}),(0,a.jsxs)(n.td,{children:["replace callback function, triggered when the operation function ",(0,a.jsx)(n.code,{children:"replace"})," is called"]}),(0,a.jsx)(n.td,{children:"(item: number | Row, position: number) => Promise<void>"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"3.3.0"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"responsive-data",children:"Responsive data"}),"\n",(0,a.jsxs)(n.p,{children:["Inherits all responsive data from ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:(0,a.jsx)(n.strong,{children:"useWatcher"})}),"."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Name"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Type"}),(0,a.jsx)(n.th,{children:"Version"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"page"}),(0,a.jsx)(n.td,{children:"Current page number, determined by initialPage"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"pageSize"}),(0,a.jsx)(n.td,{children:"Current number of pages per page, determined by initialPageSize"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"data"}),(0,a.jsx)(n.td,{children:"Paginated list array data, configured by data"}),(0,a.jsx)(n.td,{children:"any[]"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"total"}),(0,a.jsx)(n.td,{children:"Total number of data, configured by total, can be empty"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"pageCount"}),(0,a.jsx)(n.td,{children:"Total number of pages, calculated by total and pageSize"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"isLastPage"}),(0,a.jsx)(n.td,{children:"Whether the current page is the last page, when pageCount has a value, it will be compared with pageCount, otherwise it will be determined by whether the length of the list data is less than pagSize"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"fetching"}),(0,a.jsx)(n.td,{children:"Whether data is being preloaded"}),(0,a.jsx)(n.td,{children:"boolean"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"status"}),(0,a.jsxs)(n.td,{children:["action status. This status will be changed only when the corresponding action is triggered. The specific values \u200b\u200bare as follows: ",(0,a.jsx)("br",{}),"empty string: default status; ",(0,a.jsx)("br",{}),"loading: list data is being requested; ",(0,a.jsx)("br",{}),"removing: list data is being deleted; ",(0,a.jsx)("br",{}),"inserting: list data is being inserted; ",(0,a.jsx)("br",{}),"replacing: list data is being replaced"]}),(0,a.jsx)(n.td,{children:"string"}),(0,a.jsx)(n.td,{children:"3.3.0"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"removing"}),(0,a.jsx)(n.td,{children:"The row index array being removed, used to control the delete button status of the corresponding column"}),(0,a.jsx)(n.td,{children:"number[]"}),(0,a.jsx)(n.td,{children:"3.3.0"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"replacing"}),(0,a.jsx)(n.td,{children:"The row index being replaced, used to control the replacement button status of the corresponding column"}),(0,a.jsx)(n.td,{children:"number"}),(0,a.jsx)(n.td,{children:"3.3.0"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"operation-function",children:"Operation function"}),"\n",(0,a.jsxs)(n.p,{children:["Inherits all operation functions of ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:(0,a.jsx)(n.strong,{children:"useWatcher"})}),"."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Name"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Function Parameters"}),(0,a.jsx)(n.th,{children:"Return Value"}),(0,a.jsx)(n.th,{children:"Version"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"refresh"}),(0,a.jsx)(n.td,{children:"Refresh the specified page number data. This function will ignore the cache and force the request to be sent. In append mode, a list item can be passed in to indicate the page number where the list item is located."}),(0,a.jsx)(n.td,{children:"pageOrItemPage: refreshed page number or list item"}),(0,a.jsx)(n.td,{children:"Promise<AG['Responded']>"}),(0,a.jsx)(n.td,{children:"v3.1.0+"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"insert"}),(0,a.jsx)(n.td,{children:"Insert a piece of data. If index is not passed in, it will be inserted at the front by default. If a list item is passed in, it will be inserted after this list item. If the list item is not in the list data, an error will be thrown"}),(0,a.jsxs)(n.td,{children:["1. item: insert item",(0,a.jsx)("br",{}),"2. indexOrItem: insert position (index) or list item, default is 0"]}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"remove"}),(0,a.jsx)(n.td,{children:"Remove a piece of data. When a number is passed in, it indicates the index to be removed. When position If a list item is passed in, it will be removed. If the list item is not in the list data, an error will be thrown."}),(0,a.jsx)(n.td,{children:"position: Remove position (index) or list item. Multiple items can be passed in for batch deletion."}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"replace"}),(0,a.jsx)(n.td,{children:"Replace a piece of data. When a number is passed in as the second parameter, it means replacing the index. A negative number means counting from the end. When position is passed in as a list item, it will replace the list item. If the list item is not in the list data, an error will be thrown."}),(0,a.jsxs)(n.td,{children:["1. item: Replacement item",(0,a.jsx)("br",{}),"2. position: Replacement position (index) or list item. When a negative number is passed in, it means counting from the end."]}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"reload"}),(0,a.jsx)(n.td,{children:"Clear data and re-request the first page of data"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"Promise<void>"}),(0,a.jsx)(n.td,{children:"v3.1.0+"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"update"}),(0,a.jsx)(n.td,{children:"Update status data. It is the same as the use hook of alova, but when updating the data field, it updates the list data."}),(0,a.jsx)(n.td,{children:"newFrontStates: New status data object"}),(0,a.jsx)(n.td,{children:"-"}),(0,a.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,a.jsx)(n.h3,{id:"events",children:"Events"}),"\n",(0,a.jsxs)(n.p,{children:["Inherits all events of ",(0,a.jsx)(n.a,{href:"/api/core-hooks#usewatcher",children:(0,a.jsx)(n.strong,{children:"useWatcher"})}),"."]}),"\n",(0,a.jsxs)(n.table,{children:[(0,a.jsx)(n.thead,{children:(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.th,{children:"Name"}),(0,a.jsx)(n.th,{children:"Description"}),(0,a.jsx)(n.th,{children:"Callback parameters"}),(0,a.jsx)(n.th,{children:"Version"})]})}),(0,a.jsxs)(n.tbody,{children:[(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"onFetchSuccess"}),(0,a.jsx)(n.td,{children:"Callback binding function for successful fetch"}),(0,a.jsx)(n.td,{children:"event: alova successful event object"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"onFetchError"}),(0,a.jsx)(n.td,{children:"Callback binding function for failed fetch"}),(0,a.jsx)(n.td,{children:"event: alova failed event object"}),(0,a.jsx)(n.td,{children:"-"})]}),(0,a.jsxs)(n.tr,{children:[(0,a.jsx)(n.td,{children:"onFetchComplete"}),(0,a.jsx)(n.td,{children:"Callback binding function for completed fetch"}),(0,a.jsx)(n.td,{children:"event: alova completed event object"}),(0,a.jsx)(n.td,{children:"-"})]})]})]})]})}function p(e={}){const{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},85162:(e,n,t)=>{t.d(n,{Z:()=>r});t(67294);var a=t(90512);const i={tabItem:"tabItem_Ymn6"};var s=t(85893);function r(e){let{children:n,hidden:t,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.Z)(i.tabItem,r),hidden:t,children:n})}},74866:(e,n,t)=>{t.d(n,{Z:()=>y});var a=t(67294),i=t(90512),s=t(12466),r=t(16550),l=t(20469),o=t(91980),d=t(67392),c=t(20812);function h(e){return a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:t}=e;return(0,a.useMemo)((()=>{const e=n??function(e){return h(e).map((e=>{let{props:{value:n,label:t,attributes:a,default:i}}=e;return{value:n,label:t,attributes:a,default:i}}))}(t);return function(e){const n=(0,d.l)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function g(e){let{queryString:n=!1,groupId:t}=e;const i=(0,r.k6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,o._X)(s),(0,a.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(i.location.search);n.set(s,e),i.replace({...i.location,search:n.toString()})}),[s,i])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,s=u(e),[r,o]=(0,a.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!p({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const a=t.find((e=>e.default))??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:s}))),[d,h]=g({queryString:t,groupId:i}),[m,x]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,s]=(0,c.Nk)(t);return[i,(0,a.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:i}),f=(()=>{const e=d??m;return p({value:e,tabValues:s})?e:null})();(0,l.Z)((()=>{f&&o(f)}),[f]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),h(e),x(e)}),[h,x,s]),tabValues:s}}var x=t(72389);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(85893);function b(e){let{className:n,block:t,selectedValue:a,selectValue:r,tabValues:l}=e;const o=[],{blockElementScrollPositionUntilNextRender:d}=(0,s.o5)(),c=e=>{const n=e.currentTarget,t=o.indexOf(n),i=l[t].value;i!==a&&(d(n),r(i))},h=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:s}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:a===n?0:-1,"aria-selected":a===n,ref:e=>o.push(e),onKeyDown:h,onClick:c,...s,className:(0,i.Z)("tabs__item",f.tabItem,s?.className,{"tabs__item--active":a===n}),children:t??n},n)}))})}function v(e){let{lazy:n,children:t,selectedValue:i}=e;const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=s.find((e=>e.props.value===i));return e?(0,a.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:s.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function w(e){const n=m(e);return(0,j.jsxs)("div",{className:(0,i.Z)("tabs-container",f.tabList),children:[(0,j.jsx)(b,{...n,...e}),(0,j.jsx)(v,{...n,...e})]})}function y(e){const n=(0,x.Z)();return(0,j.jsx)(w,{...e,children:h(e.children)},String(n))}},11151:(e,n,t)=>{t.d(n,{Z:()=>l,a:()=>r});var a=t(67294);const i={},s=a.createContext(i);function r(e){const n=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:n},e.children)}}}]);